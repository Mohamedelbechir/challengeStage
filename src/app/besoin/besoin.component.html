<div class="card shadow-lg mt-4">
    <h5 class="d-inline-block text-center">Bésoins</h5>
    <table class="table table-striped">
        <!-- <caption class="text-center" style="caption-side:top">Conversations</caption> -->
        <thead>
            <tr>
                <th style="width: 420px;">Date</th>
                <th style="width: 400px;">Description</th>
                <th style="width: 320px;">Statut</th>
                <th style="width: 320px;">OP</th>
                <th style="width: 320px;">Source</th>
                <th style="width: 100px;">Date en</th>
            </tr>
        </thead>
        <tbody>

            <tr *ngFor="let item of besoins">
                <td>{{item?.date | date: 'MM-dd-yyyy'}}</td>
                <td>{{item?.description}}</td>
                <td>{{item?.statut}}</td>
                <td>
                    {{item?.appelOffre?.etatOffre}}
                    <!-- {{ item?.appelOffre?.fichier }} -->
                </td>
                <td>
                    <app-besoin-list-item-presta *ngFor="let source of item?.sources"
                        [urlPrestaire]="source?._links.prestataire?.href">
                    </app-besoin-list-item-presta>
                </td>
                <td>{{item?.dateEnvoie}}</td>
            </tr>
            <tr *ngFor="let item of besoinsNew">
                <td>{{item?.date | date: 'MM-dd-yyyy'}}</td>
                <td>{{item?.description}}</td>
                <td>{{item?.statut}}</td>
                <td>
                    {{item?.appelOffre?.etatOffre}}
                    <!-- {{ item?.appelOffre?.fichier }} -->
                </td>
                <td>
                    <app-besoin-list-item-presta *ngFor="let source of item?.sources"
                        [urlPrestaire]="source?.prestataire">
                    </app-besoin-list-item-presta>
                </td>
                <td>{{item?.dateEnvoie | date: 'MM-dd-yyyy'}}</td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td><button (click)="onInsert()" type="button" class="btn btn-light btn-sm">
                        <span
                            style="position: relative; background-color: rgb(179, 218, 179); padding: .25rem; border-radius: 3px; margin: 2px; float: right;">
                            <svg style="width: 1rem; height: 1rem;fill: rgb(1, 41, 1);"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                <path d="M16 9h-5V4H9v5H4v2h5v5h2v-5h5V9z" /></svg>
                        </span>
                        Nouveau besoin
                    </button>
                </td>
                <td>
                    <!-- description -->
                    <input [formControl]="description" type="text" class="form-control form-control-sm"
                        placeholder="description">
                </td>
                <td>
                    <!-- statut -->
                    <select [formControl]="statut" class="form-control form-control-sm">
                        <option value="encours"> en cours</option>
                        <option value="termine">terminé </option>
                    </select>
                </td>
                <td>
                    <!-- Appel d'Offre -->
                    <div class="form-inline">
                        <div class="form-group">
                            <select [formControl]="etatOffre" class="form-control form-control-sm">
                                <option value="attente"> en attente</option>
                                <option value="oui">oui </option>
                            </select>
                            <label for="fichier" class="span-for-icon">

                                <svg style="width: 1.5rem; height: 1.5rem;fill:black;" xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 50 50" enable-background="new 0 0 50 50">
                                    <path
                                        d="M13.8 39.6c-1.5 0-3.1-.6-4.2-1.8-2.3-2.3-2.3-6.1 0-8.5l17-17c3.1-3.1 8.2-3.1 11.3 0 3.1 3.1 3.1 8.2 0 11.3L25.1 36.4 23.7 35l12.7-12.7c2.3-2.3 2.3-6.1 0-8.5-2.3-2.3-6.1-2.3-8.5 0l-17 17c-.8.8-1.2 1.8-1.2 2.8 0 1.1.4 2.1 1.2 2.8 1.6 1.6 4.1 1.6 5.7 0l12.7-12.7c.8-.8.8-2 0-2.8-.8-.8-2-.8-2.8 0L18 29.3l-1.4-1.4 8.5-8.5c1.6-1.6 4.1-1.6 5.7 0 1.6 1.6 1.6 4.1 0 5.7L18 37.8c-1.1 1.2-2.7 1.8-4.2 1.8z" />
                                </svg>
                                <input id="fichier" (change)="emitFiles($event)" type="file"
                                    class="form-control form-control-sm col-4">
                            </label>
                        </div>
                    </div>

                    <span class="small">{{file ? file.name  : '' }}</span>

                </td>
                <td>
                    <!-- Source -->
                    <select [formControl]="urlPrestataire"  class="form-control form-control-sm">
                        <option *ngFor="let pres of prestataires" [value]="pres._links.prestataire.href"> {{pres.nom}}</option>
                    </select>
                </td>
                <td>
                    <!-- Date d'envoie -->
                    <input [formControl]="dateEnvoie" style="width: 140px;" type="date" class="form-control form-control-sm">
                </td>
            </tr>
        </tfoot>
    </table>
    <!--  <div class="row form-inline">
        <div class="col-4" style="width: 210px;">
            <button type="button" class="btn btn-light">
                <span
                    style="position: relative; background-color: rgb(179, 218, 179); padding: .5rem; border-radius: 3px; margin: 2px; float: right;">
                    <svg style="width: 2rem; height: 2rem;fill: rgb(1, 41, 1);"
                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <path d="M16 9h-5V4H9v5H4v2h5v5h2v-5h5V9z" /></svg>
                </span>
                Nouveau besoin
            </button>
        </div>
        <input type="text" class="col-7 form-control form-control-lg" placeholder="Conversation">
    </div> -->
    <div class="p-2 text-center">
    
        <button (click)="onAnnule.emit()" type="button" class="btn btn-light mr-3">annuler</button>
        <button type="button" class="btn btn-success" (click)="onValid.emit()">valider</button>

    </div>
</div>