<div class="card shadow-lg mt-4">
    <h5 class="d-inline-block text-center">Bésoins</h5>
    <table class="table table-striped">
        <!-- <caption class="text-center" style="caption-side:top">Conversations</caption> -->
        <thead>
            <tr>
                <th style="width: 420px;">Date</th>
                <th style="width: 400px;">Description</th>
                <th style="width: 320px;">Statut</th>
                <th style="width: 320px;">OP</th>
                <th style="width: 320px;">Source</th>
                <th style="width: 100px;">Date en</th>
            </tr>
        </thead>
        <tbody>

            <tr *ngFor="let item of besoins; let indexBesoin = index">
                <td>{{item?.date | date: 'MM-dd-yyyy'}}</td>
                <td>{{item?.description}}</td>
                <td>{{item?.statut}}</td>
                <td>
                    {{item?.appelOffre?.etatOffre}}
                    <span class="span-for-icon" *ngIf="item?.appelOffre?._links"
                        (click)="onClickAffichOA(item?.appelOffre?._links?.fichier?.href)">
                        <svg style="width: 1rem; height: 1rem;fill:black;" version="1.1" id="magnifier"
                            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
                            y="0px" viewBox="0 0 1009.9912 1010" enable-background="new 0 0 1009.9912 1010"
                            xml:space="preserve">
                            <g>
                                <g id="magnifier-magnifier">
                                    <g>
                                        <path fill="#5C524C"
                                            d="M90.5801,1010c-24.1909,0-46.9307-9.3965-64.0391-26.5049C9.4155,966.3516,0,943.6123,0,919.4023     c0-24.1738,9.4155-46.9482,26.541-64.0576l183.1333-183.1318c17.1079-17.1084,39.8472-26.541,64.0391-26.541     c24.1919,0,46.9482,9.4326,64.0747,26.5049c35.3105,35.3642,35.292,92.8574,0,128.1494L154.6553,983.4951     C137.5293,1000.6035,114.7725,1010,90.5801,1010L90.5801,1010z M273.7134,682.3984c-14.3828,0-27.9043,5.5957-38.0723,15.7813     L52.5088,881.3125c-10.1865,10.1865-15.7813,23.708-15.7813,38.0898c0,14.3829,5.5948,27.9405,15.7813,38.125     c20.3364,20.337,55.8076,20.337,76.1797-0.0341l183.1328-183.1339c20.9814-20.9814,20.9814-55.162-0.0186-76.1797     C301.6353,687.9941,288.1138,682.3984,273.7134,682.3984L273.7134,682.3984z" />
                                    </g>
                                    <g>
                                        <path fill="#5C524C"
                                            d="M343.2393,736.1973c-1.5957,0-3.2095-0.2149-4.8057-0.6447c-6.3486-1.7226-11.2979-6.707-12.9658-13.0556     c-2.4922-9.5752-7.1016-17.7538-13.6651-24.3526c-6.5273-6.4922-14.7226-11.0829-24.3349-13.6299     c-6.3482-1.6855-11.3154-6.6357-13.0371-12.9843c-1.7036-6.3477,0.1074-13.126,4.7524-17.752l58.7485-58.75     c3.6587-3.6943,8.6973-5.667,13.898-5.3789c5.1831,0.2861,10.0244,2.7256,13.3066,6.7422     c14.4717,17.6816,30.7735,34.001,48.4727,48.4551c4.0176,3.2998,6.456,8.1416,6.7251,13.3066     c0.2515,5.2002-1.6856,10.2217-5.3623,13.916l-58.7485,58.7491C352.7441,734.2969,348.0459,736.1973,343.2393,736.1973     L343.2393,736.1973z M323.9082,660.9863c5.021,3.2646,9.6655,6.9942,13.8618,11.1905c4.2144,4.2324,7.98,8.8945,11.2442,13.8808     l26.021-26.0029c-8.7515-7.9629-17.126-16.3555-25.1065-25.1065L323.9082,660.9863L323.9082,660.9863z" />
                                    </g>
                                    <g>
                                        <path fill="#5C524C"
                                            d="M630.4912,759.0088c-209.2607,0-379.4995-170.2568-379.4995-379.5088     C250.9917,170.2388,421.2305,0,630.4912,0s379.5,170.2388,379.5,379.5C1009.9912,588.752,839.752,759.0088,630.4912,759.0088     L630.4912,759.0088z M630.4912,36.7271c-188.9956,0-342.7724,153.7758-342.7724,342.7729     c0,188.9873,153.7768,342.7812,342.7724,342.7812c188.9971,0,342.7744-153.7939,342.7744-342.7812     C973.2656,190.5029,819.4883,36.7271,630.4912,36.7271L630.4912,36.7271z" />
                                    </g>
                                    <g>
                                        <path fill="#5C524C"
                                            d="M431.8652,379.8228c-10.1499,0-18.3637-8.2134-18.3637-18.3638     c0-129.6196,105.4292-235.0664,235.0307-235.0664c10.1494,0,18.3643,8.2129,18.3643,18.3633     c0,10.1499-8.2149,18.3637-18.3643,18.3637c-109.3379,0-198.3037,88.9663-198.3037,198.3394     C450.2285,371.6094,442.0147,379.8228,431.8652,379.8228L431.8652,379.8228z" />
                                    </g>
                                </g>
                            </g>
                        </svg>
                    </span>
                    <label for="fichierOp" class="span-for-icon">

                        <svg style="width: 1.5rem; height: 1.5rem;fill:black;" xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 50 50" enable-background="new 0 0 50 50">
                            <path
                                d="M13.8 39.6c-1.5 0-3.1-.6-4.2-1.8-2.3-2.3-2.3-6.1 0-8.5l17-17c3.1-3.1 8.2-3.1 11.3 0 3.1 3.1 3.1 8.2 0 11.3L25.1 36.4 23.7 35l12.7-12.7c2.3-2.3 2.3-6.1 0-8.5-2.3-2.3-6.1-2.3-8.5 0l-17 17c-.8.8-1.2 1.8-1.2 2.8 0 1.1.4 2.1 1.2 2.8 1.6 1.6 4.1 1.6 5.7 0l12.7-12.7c.8-.8.8-2 0-2.8-.8-.8-2-.8-2.8 0L18 29.3l-1.4-1.4 8.5-8.5c1.6-1.6 4.1-1.6 5.7 0 1.6 1.6 1.6 4.1 0 5.7L18 37.8c-1.1 1.2-2.7 1.8-4.2 1.8z" />
                        </svg>
                        <input id="fichierOp" (change)="emitFileOp($event, indexBesoin)" type="file"
                            class="form-control form-control-sm col-4">
                    </label>

                    <span></span>
                    <!-- {{ item?.appelOffre?.fichier }} -->
                </td>
                <td>
                    <app-besoin-list-item-presta *ngFor="let source of item?.sources; let index = index"
                        [urlPrestaire]="source?._links.prestataire?.href">
                    </app-besoin-list-item-presta>
                </td>
                <td>{{item?.dateEnvoie}}</td>
            </tr>
            <tr *ngFor="let item of besoinsNew">
                <td>{{item?.date | date: 'MM-dd-yyyy'}}</td>
                <td>{{item?.description}}</td>
                <td>{{item?.statut}}</td>
                <td>

                    {{item?.appelOffre?.etatOffre}}
                    <!-- {{ item?.appelOffre?.fichier }} -->
                </td>
                <td>
                    <app-besoin-list-item-presta *ngFor="let source of item?.sources"
                        [urlPrestaire]="source?.prestataire">
                    </app-besoin-list-item-presta>
                </td>
                <td>{{item?.dateEnvoie | date: 'MM-dd-yyyy'}}</td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td><button (click)="onInsert()" type="button" class="btn btn-light btn-sm">
                        <span
                            style="position: relative; background-color: rgb(179, 218, 179); padding: .25rem; border-radius: 3px; margin: 2px; float: right;">
                            <svg style="width: 1rem; height: 1rem;fill: rgb(1, 41, 1);"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                <path d="M16 9h-5V4H9v5H4v2h5v5h2v-5h5V9z" /></svg>
                        </span>
                        Nouveau besoin
                    </button>
                </td>
                <td>
                    <!-- description -->
                    <input [formControl]="description" type="text" class="form-control form-control-sm"
                        placeholder="description">
                </td>
                <td>
                    <!-- statut -->
                    <select [formControl]="statut" class="form-control form-control-sm">
                        <option value="encours"> en cours</option>
                        <option value="termine">terminé </option>
                    </select>
                </td>
                <td>
                    <!-- Appel d'Offre -->
                    <div class="form-inline">
                        <div class="form-group">
                            <select [formControl]="etatOffre" class="form-control form-control-sm">
                                <option value="attente"> en attente</option>
                                <option value="oui">oui </option>
                            </select>
                            <label for="fichier" class="span-for-icon">

                                <svg style="width: 1.5rem; height: 1.5rem;fill:black;"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"
                                    enable-background="new 0 0 50 50">
                                    <path
                                        d="M13.8 39.6c-1.5 0-3.1-.6-4.2-1.8-2.3-2.3-2.3-6.1 0-8.5l17-17c3.1-3.1 8.2-3.1 11.3 0 3.1 3.1 3.1 8.2 0 11.3L25.1 36.4 23.7 35l12.7-12.7c2.3-2.3 2.3-6.1 0-8.5-2.3-2.3-6.1-2.3-8.5 0l-17 17c-.8.8-1.2 1.8-1.2 2.8 0 1.1.4 2.1 1.2 2.8 1.6 1.6 4.1 1.6 5.7 0l12.7-12.7c.8-.8.8-2 0-2.8-.8-.8-2-.8-2.8 0L18 29.3l-1.4-1.4 8.5-8.5c1.6-1.6 4.1-1.6 5.7 0 1.6 1.6 1.6 4.1 0 5.7L18 37.8c-1.1 1.2-2.7 1.8-4.2 1.8z" />
                                </svg>
                                <input id="fichier" (change)="emitFiles($event)" type="file"
                                    class="form-control form-control-sm col-4">
                            </label>
                        </div>
                    </div>

                    <span class="small">{{file ? file.name  : '' }}</span>

                </td>
                <td>
                    <!-- Source -->
                    <select [formControl]="urlPrestataire" class="form-control form-control-sm">
                        <option *ngFor="let pres of prestataires" [value]="pres._links.prestataire.href"> {{pres.nom}}
                        </option>
                    </select>
                </td>
                <td>
                    <!-- Date d'envoie -->
                    <input [formControl]="dateEnvoie" style="width: 140px;" type="date"
                        class="form-control form-control-sm">
                </td>
            </tr>
        </tfoot>
    </table>
    <!--  <div class="row form-inline">
        <div class="col-4" style="width: 210px;">
            <button type="button" class="btn btn-light">
                <span
                    style="position: relative; background-color: rgb(179, 218, 179); padding: .5rem; border-radius: 3px; margin: 2px; float: right;">
                    <svg style="width: 2rem; height: 2rem;fill: rgb(1, 41, 1);"
                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <path d="M16 9h-5V4H9v5H4v2h5v5h2v-5h5V9z" /></svg>
                </span>
                Nouveau besoin
            </button>
        </div>
        <input type="text" class="col-7 form-control form-control-lg" placeholder="Conversation">
    </div> -->
    <div class="p-2 text-center">

        <button (click)="onAnnule.emit()" type="button" class="btn btn-light mr-3">annuler</button>
        <button type="button" class="btn btn-success" (click)="onValid.emit()">valider</button>

    </div>
</div>